(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 10.4' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     28967,        790]
NotebookOptionsPosition[     27796,        745]
NotebookOutlinePosition[     28139,        760]
CellTagsIndexPosition[     28096,        757]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["Preamble", "Chapter",
 CellChangeTimes->{{3.780771541527303*^9, 3.780771547398859*^9}}],

Cell["\<\
This section contains the program\[CloseCurlyQuote]s pseudocode and a few \
definitions that should only need to be executed once (as long as the \
parameters are not changed).\
\>", "Text",
 CellChangeTimes->{{3.780771585873912*^9, 3.780771622034917*^9}}],

Cell[CellGroupData[{

Cell["Pseudocode", "Section",
 CellChangeTimes->{{3.7803292543397837`*^9, 3.780329256110973*^9}, {
  3.7807721136837177`*^9, 3.7807721151272697`*^9}}],

Cell["xxx", "ItemNumbered",
 CellChangeTimes->{{3.780329276188409*^9, 3.7803293011823826`*^9}, {
  3.7803296031889906`*^9, 3.7803296394264975`*^9}, {3.780678753422472*^9, 
  3.780678766351327*^9}, {3.783275121412613*^9, 3.7832751217724123`*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell["Parameters", "Section",
 CellChangeTimes->{{3.7807714143939443`*^9, 3.7807714158685155`*^9}}],

Cell["\<\
The parameters defined below can be changed to generate different types of \
example network. Everything below this point should also be re-executed when \
the parameters are updated.\
\>", "Text",
 CellChangeTimes->{{3.780771419110817*^9, 3.780771456481101*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"expresstodo", "=", 
   RowBox[{"Table", "[", 
    RowBox[{"i", ",", 
     RowBox[{"{", 
      RowBox[{"i", ",", "0", ",", "125"}], "}"}]}], "]"}]}], ";", 
  RowBox[{"(*", " ", 
   RowBox[{
   "list", " ", "of", " ", "IDs", " ", "of", " ", "lines", " ", "for", " ", 
    "which", " ", "to", " ", "create", " ", "an", " ", "express", " ", 
    "route", " ", 
    RowBox[{"(", 
     RowBox[{
     "includes", " ", "only", " ", "bus", " ", "routes", " ", "for", " ", 
      "Chicago", " ", "network"}], ")"}]}], " ", "*)"}]}]], "Input",
 CellChangeTimes->{{3.7807714685817165`*^9, 3.780771469692157*^9}, {
   3.7807722664852037`*^9, 3.7807723285478315`*^9}, {3.7807723622388773`*^9, 
   3.7807724136701546`*^9}, {3.78084871435122*^9, 3.780848790950302*^9}, 
   3.7808553189388647`*^9, {3.7808554668835506`*^9, 3.78085547840916*^9}, 
   3.7808563896968355`*^9, 3.780856483595828*^9, {3.780856916720811*^9, 
   3.7808569330009212`*^9}, {3.780856989281165*^9, 3.7808570479088755`*^9}, {
   3.780857133645026*^9, 3.780857136792862*^9}, {3.780857191360109*^9, 
   3.7808572266899395`*^9}, {3.7808573219851074`*^9, 3.780857331801365*^9}, {
   3.7808607186237993`*^9, 3.7808608617713127`*^9}, {3.78086801485207*^9, 
   3.780868022792763*^9}, {3.780868625444586*^9, 3.7808686683276653`*^9}, 
   3.7808687167390623`*^9, 3.780868928273485*^9, {3.780868975178445*^9, 
   3.780869029117138*^9}, {3.7808711560911093`*^9, 3.7808711605126915`*^9}, {
   3.780871826919999*^9, 3.78087182838951*^9}, {3.780919353945106*^9, 
   3.780919355858287*^9}, {3.7809194392511005`*^9, 3.7809194602362547`*^9}, {
   3.7809424795783677`*^9, 3.780942531855831*^9}, 3.7809429087480173`*^9, {
   3.780943398100117*^9, 3.7809433982011757`*^9}, 3.780943463525234*^9, {
   3.7809437631608467`*^9, 3.7809437999572124`*^9}, {3.780944128426804*^9, 
   3.780944130208231*^9}, {3.7809548978169203`*^9, 3.780954954102132*^9}, {
   3.7809556529361563`*^9, 3.780955655300378*^9}, {3.7809572060161886`*^9, 
   3.780957286426631*^9}, {3.7809600091985383`*^9, 3.780960031317463*^9}, 
   3.780960062558426*^9, 3.7809603584370627`*^9, {3.7809604349608607`*^9, 
   3.7809604491683054`*^9}, {3.78096055718265*^9, 3.780960585183673*^9}, {
   3.781009447658851*^9, 3.781009450770296*^9}, 3.7810095429309545`*^9, {
   3.7810095953263674`*^9, 3.781009598897485*^9}, {3.7810107937042007`*^9, 
   3.7810107957861757`*^9}, {3.7810115227225223`*^9, 
   3.7810115779611545`*^9}, {3.7810144668674707`*^9, 3.781014555418959*^9}, {
   3.781021911321941*^9, 3.7810219179143763`*^9}, {3.781022006406988*^9, 
   3.781022019979051*^9}, {3.7810220870844736`*^9, 3.7810220920483017`*^9}, {
   3.781022136700799*^9, 3.7810221586987467`*^9}, 3.7810242811723967`*^9, 
   3.781025843944352*^9, {3.781026486109403*^9, 3.7810264895588293`*^9}, 
   3.781026533341668*^9, {3.7810267248091764`*^9, 3.7810267248731766`*^9}, {
   3.7810267823857317`*^9, 3.781026794780738*^9}, {3.7810269293668833`*^9, 
   3.7810269294878497`*^9}, {3.781029403505779*^9, 3.781029425451626*^9}, {
   3.7810300705419583`*^9, 3.781030150675523*^9}, 3.7810303712836375`*^9, 
   3.781215050151699*^9, 3.7812152277791834`*^9, {3.7812152606319723`*^9, 
   3.7812152635091543`*^9}, {3.7812153196418*^9, 3.781215335208852*^9}, {
   3.781215390410019*^9, 3.7812153920804825`*^9}, {3.7812177595629854`*^9, 
   3.7812178587399287`*^9}, 3.7812182499173217`*^9, {3.781221281030157*^9, 
   3.7812212897259045`*^9}, {3.781221335134143*^9, 3.7812213526717744`*^9}, {
   3.781221494043868*^9, 3.7812215004582353`*^9}, {3.7812218463120584`*^9, 
   3.7812218476089535`*^9}, {3.7812220266803837`*^9, 3.7812220725488634`*^9}, 
   3.7812221063527718`*^9, 3.7812223818225613`*^9, 3.7812225156170373`*^9, {
   3.781222683887783*^9, 3.7812226873382235`*^9}, 3.7812228167200346`*^9, {
   3.782320289723398*^9, 3.782320292056741*^9}, 3.7823203428701305`*^9, {
   3.7823204535972333`*^9, 3.7823204571647677`*^9}, 3.782320488175474*^9, {
   3.7832751342874274`*^9, 3.783275190321265*^9}, {3.783529645031732*^9, 
   3.7835297670376325`*^9}}]
}, Open  ]],

Cell[CellGroupData[{

Cell["Functions", "Section",
 CellChangeTimes->{{3.7809609444987016`*^9, 3.780960945520376*^9}}],

Cell["\<\
The following functions should only need to be defined when the above \
parameters are changed.\
\>", "Text",
 CellChangeTimes->{{3.780960947868601*^9, 3.7809609775890903`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"SetDirectory", "[", 
   RowBox[{"NotebookDirectory", "[", "]"}], "]"}], ";", 
  RowBox[{"(*", " ", 
   RowBox[{"sets", " ", "directory"}], " ", "*)"}]}]], "Input",
 CellChangeTimes->{{3.7809609812489176`*^9, 3.7809610158078156`*^9}, {
  3.7812160888971586`*^9, 3.7812160965841017`*^9}, {3.7812161377517896`*^9, 
  3.7812161379507046`*^9}, {3.7812162957982883`*^9, 3.781216351272917*^9}, {
  3.7812163825957837`*^9, 3.7812164502556925`*^9}, {3.7812165077989492`*^9, 
  3.7812165230886445`*^9}, {3.7812166474919124`*^9, 3.781216792918934*^9}, {
  3.7812173628764753`*^9, 3.781217364455101*^9}, {3.781217454098124*^9, 
  3.78121753432751*^9}, {3.7812175962315483`*^9, 3.7812176465851917`*^9}, {
  3.781217705740122*^9, 3.7812177108777266`*^9}, {3.7812186305796075`*^9, 
  3.781218643516287*^9}, {3.781221905643876*^9, 3.781222005927905*^9}, {
  3.7812221183646307`*^9, 3.781222217512882*^9}, {3.781222258280546*^9, 
  3.7812222880344963`*^9}, {3.781299636375985*^9, 3.781299750825853*^9}, {
  3.7832751841830025`*^9, 3.7832751856191025`*^9}}],

Cell[" ", "Text",
 Editable->False,
 Selectable->False,
 CellFrame->{{0, 0}, {0, 0.5}},
 ShowCellBracket->False,
 CellMargins->{{0, 0}, {1, 1}},
 CellElementSpacings->{"CellMinHeight"->1},
 CellFrameMargins->0,
 CellFrameColor->RGBColor[0, 0, 1],
 CellSize->{Inherited, 3}]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Execution", "Chapter",
 CellChangeTimes->{{3.780771565651047*^9, 3.780771567477462*^9}}],

Cell["\<\
The contents of the following sections may need to be repeatedly re-executed \
to generate satisfactory example networks. They should always be executed in \
order from top to bottom.\
\>", "Text",
 CellChangeTimes->{{3.7807716306375384`*^9, 3.780771649293496*^9}, {
  3.7808685835746193`*^9, 3.7808686061162567`*^9}}],

Cell[CellGroupData[{

Cell["File Load", "Section",
 CellChangeTimes->{{3.780771521038786*^9, 3.7807715235126934`*^9}, {
  3.7807720128307896`*^9, 3.7807720163927107`*^9}, {3.7832752158998203`*^9, 
  3.783275216956482*^9}, {3.7835295711900277`*^9, 3.7835295724161053`*^9}}],

Cell["\<\
Reads the network data files to assemble graph objects and data structures.\
\>", "Text",
 CellChangeTimes->{{3.7835295798334684`*^9, 3.783529600112133*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"Set", " ", "directory"}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"SetDirectory", "[", 
     RowBox[{"NotebookDirectory", "[", "]"}], "]"}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{"Read", " ", "node", " ", "data"}], " ", "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"nodedata", "=", 
     RowBox[{"Partition", "[", 
      RowBox[{
       RowBox[{"ReadList", "[", 
        RowBox[{"\"\<data//node_data.txt\>\"", ",", "Word"}], "]"}], ",", 
       "5"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"ncomment", "=", 
     RowBox[{"nodedata", "[", 
      RowBox[{"[", "1", "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"nid", "=", 
     RowBox[{"ToExpression", "[", 
      RowBox[{"nodedata", "[", 
       RowBox[{"[", 
        RowBox[{
         RowBox[{"2", ";;"}], ",", "1"}], "]"}], "]"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"nname", "=", 
     RowBox[{"nodedata", "[", 
      RowBox[{"[", 
       RowBox[{
        RowBox[{"2", ";;"}], ",", "2"}], "]"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"ntype", "=", 
     RowBox[{"ToExpression", "[", 
      RowBox[{"nodedata", "[", 
       RowBox[{"[", 
        RowBox[{
         RowBox[{"2", ";;"}], ",", "3"}], "]"}], "]"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"nline", "=", 
     RowBox[{"ToExpression", "[", 
      RowBox[{"nodedata", "[", 
       RowBox[{"[", 
        RowBox[{
         RowBox[{"2", ";;"}], ",", "4"}], "]"}], "]"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"nvalue", "=", 
     RowBox[{"ToExpression", "[", 
      RowBox[{"nodedata", "[", 
       RowBox[{"[", 
        RowBox[{
         RowBox[{"2", ";;"}], ",", "5"}], "]"}], "]"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Clear", "[", "nodedata", "]"}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{"Read", " ", "arc", " ", "data"}], " ", "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"arcdata", "=", 
     RowBox[{"Partition", "[", 
      RowBox[{
       RowBox[{"ReadList", "[", 
        RowBox[{"\"\<data//arc_data.txt\>\"", ",", "Word"}], "]"}], ",", 
       "6"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"acomment", "=", 
     RowBox[{"arcdata", "[", 
      RowBox[{"[", "1", "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"aid", "=", 
     RowBox[{"ToExpression", "[", 
      RowBox[{"arcdata", "[", 
       RowBox[{"[", 
        RowBox[{
         RowBox[{"2", ";;"}], ",", "1"}], "]"}], "]"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"atype", "=", 
     RowBox[{"ToExpression", "[", 
      RowBox[{"arcdata", "[", 
       RowBox[{"[", 
        RowBox[{
         RowBox[{"2", ";;"}], ",", "2"}], "]"}], "]"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"aline", "=", 
     RowBox[{"ToExpression", "[", 
      RowBox[{"arcdata", "[", 
       RowBox[{"[", 
        RowBox[{
         RowBox[{"2", ";;"}], ",", "3"}], "]"}], "]"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"arc", "=", 
     RowBox[{"Table", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"ToExpression", "[", 
         RowBox[{"arcdata", "[", 
          RowBox[{"[", 
           RowBox[{"i", ",", "4"}], "]"}], "]"}], "]"}], "\[DirectedEdge]", 
        RowBox[{"ToExpression", "[", 
         RowBox[{"arcdata", "[", 
          RowBox[{"[", 
           RowBox[{"i", ",", "5"}], "]"}], "]"}], "]"}]}], ",", 
       RowBox[{"{", 
        RowBox[{"i", ",", "2", ",", 
         RowBox[{"Length", "[", "arcdata", "]"}]}], "}"}]}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"atime", "=", 
     RowBox[{"ToExpression", "[", 
      RowBox[{"arcdata", "[", 
       RowBox[{"[", 
        RowBox[{
         RowBox[{"2", ";;"}], ",", "6"}], "]"}], "]"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Clear", "[", "arcdata", "]"}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{"Read", " ", "transit", " ", "data"}], " ", "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"linedata", "=", 
     RowBox[{"Partition", "[", 
      RowBox[{
       RowBox[{"ReadList", "[", 
        RowBox[{"\"\<data//transit_data.txt\>\"", ",", "Word"}], "]"}], ",", 
       "11"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"lcomment", "=", 
     RowBox[{"linedata", "[", 
      RowBox[{"[", "1", "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"lid", "=", 
     RowBox[{"ToExpression", "[", 
      RowBox[{"linedata", "[", 
       RowBox[{"[", 
        RowBox[{
         RowBox[{"2", ";;"}], ",", "1"}], "]"}], "]"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"lname", "=", 
     RowBox[{"linedata", "[", 
      RowBox[{"[", 
       RowBox[{
        RowBox[{"2", ";;"}], ",", "2"}], "]"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"ltype", "=", 
     RowBox[{"ToExpression", "[", 
      RowBox[{"linedata", "[", 
       RowBox[{"[", 
        RowBox[{
         RowBox[{"2", ";;"}], ",", "3"}], "]"}], "]"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"lfleet", "=", 
     RowBox[{"ToExpression", "[", 
      RowBox[{"linedata", "[", 
       RowBox[{"[", 
        RowBox[{
         RowBox[{"2", ";;"}], ",", "4"}], "]"}], "]"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"lcircuit", "=", 
     RowBox[{"ToExpression", "[", 
      RowBox[{"linedata", "[", 
       RowBox[{"[", 
        RowBox[{
         RowBox[{"2", ";;"}], ",", "5"}], "]"}], "]"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"lscaling", "=", 
     RowBox[{"ToExpression", "[", 
      RowBox[{"linedata", "[", 
       RowBox[{"[", 
        RowBox[{
         RowBox[{"2", ";;"}], ",", "6"}], "]"}], "]"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"llb", "=", 
     RowBox[{"ToExpression", "[", 
      RowBox[{"linedata", "[", 
       RowBox[{"[", 
        RowBox[{
         RowBox[{"2", ";;"}], ",", "7"}], "]"}], "]"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"lub", "=", 
     RowBox[{"ToExpression", "[", 
      RowBox[{"linedata", "[", 
       RowBox[{"[", 
        RowBox[{
         RowBox[{"2", ";;"}], ",", "8"}], "]"}], "]"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"lfare", "=", 
     RowBox[{"ToExpression", "[", 
      RowBox[{"linedata", "[", 
       RowBox[{"[", 
        RowBox[{
         RowBox[{"2", ";;"}], ",", "9"}], "]"}], "]"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"lfreq", "=", 
     RowBox[{"ToExpression", "[", 
      RowBox[{"linedata", "[", 
       RowBox[{"[", 
        RowBox[{
         RowBox[{"2", ";;"}], ",", "10"}], "]"}], "]"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"lcap", "=", 
     RowBox[{"ToExpression", "[", 
      RowBox[{"linedata", "[", 
       RowBox[{"[", 
        RowBox[{
         RowBox[{"2", ";;"}], ",", "11"}], "]"}], "]"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Clear", "[", "linedata", "]"}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{"Read", " ", "initial", " ", "flows"}], " ", "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"flowdata", "=", 
     RowBox[{"Partition", "[", 
      RowBox[{
       RowBox[{"ReadList", "[", 
        RowBox[{"\"\<data//initial_flows.txt\>\"", ",", "Word"}], "]"}], ",", 
       "2"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"fcomment", "=", 
     RowBox[{"flowdata", "[", 
      RowBox[{"[", "1", "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"fid", "=", 
     RowBox[{"ToExpression", "[", 
      RowBox[{"flowdata", "[", 
       RowBox[{"[", 
        RowBox[{
         RowBox[{"2", ";;"}], ",", "1"}], "]"}], "]"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"fflow", "=", 
     RowBox[{"ToExpression", "[", 
      RowBox[{"flowdata", "[", 
       RowBox[{"[", 
        RowBox[{
         RowBox[{"2", ";;"}], ",", "2"}], "]"}], "]"}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Clear", "[", "flowdata", "]"}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{"Read", " ", "initial", " ", "solution", " ", "log"}], " ", 
    "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"logdata", "=", 
     RowBox[{"Partition", "[", 
      RowBox[{
       RowBox[{"ReadList", "[", 
        RowBox[{"\"\<data//initial_solution_log.txt\>\"", ",", "Word"}], 
        "]"}], ",", "8"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{
     RowBox[{"Read", " ", "line"}], "-", 
     RowBox[{"level", " ", "stop", " ", "metric", " ", "data"}]}], " ", 
    "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"metdata", "=", 
     RowBox[{
      RowBox[{"Partition", "[", 
       RowBox[{
        RowBox[{"ReadList", "[", 
         RowBox[{"\"\<output//line_metrics.txt\>\"", ",", "Word"}], "]"}], 
        ",", "3"}], "]"}], "[", 
      RowBox[{"[", 
       RowBox[{"2", ";;"}], "]"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"linemetrics", "=", 
     RowBox[{"ConstantArray", "[", 
      RowBox[{
       RowBox[{"{", "}"}], ",", 
       RowBox[{"Length", "[", "lid", "]"}]}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Do", "[", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{
       RowBox[{"linemetrics", "[", 
        RowBox[{"[", 
         RowBox[{"(", 
          RowBox[{
           RowBox[{"ToExpression", "[", 
            RowBox[{"metdata", "[", 
             RowBox[{"[", 
              RowBox[{"i", ",", "1"}], "]"}], "]"}], "]"}], "+", "1"}], ")"}],
          "]"}], "]"}], "=", 
       RowBox[{"Append", "[", 
        RowBox[{
         RowBox[{"linemetrics", "[", 
          RowBox[{"[", 
           RowBox[{"(", 
            RowBox[{
             RowBox[{"ToExpression", "[", 
              RowBox[{"metdata", "[", 
               RowBox[{"[", 
                RowBox[{"i", ",", "1"}], "]"}], "]"}], "]"}], "+", "1"}], 
            ")"}], "]"}], "]"}], ",", 
         RowBox[{"ToExpression", "[", 
          RowBox[{"metdata", "[", 
           RowBox[{"[", 
            RowBox[{"i", ",", 
             RowBox[{"2", ";;", "3"}]}], "]"}], "]"}], "]"}]}], "]"}]}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{"i", ",", "1", ",", 
        RowBox[{"Length", "[", "metdata", "]"}]}], "}"}]}], "]"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Clear", "[", "metdata", "]"}], ";"}], 
   "\[IndentingNewLine]"}]}]], "Input",
 CellChangeTimes->{{3.7835302097148952`*^9, 3.7835302329805803`*^9}, {
   3.7835302763974824`*^9, 3.7835306201619473`*^9}, {3.7835306891601353`*^9, 
   3.783530759856991*^9}, {3.78353086894108*^9, 3.7835309418281965`*^9}, {
   3.783530980135295*^9, 3.783531111164279*^9}, {3.783531159648484*^9, 
   3.7835312248793583`*^9}, {3.7835312693348775`*^9, 3.783531311756509*^9}, {
   3.7835314181119223`*^9, 3.783531504282431*^9}, {3.7835315430512056`*^9, 
   3.7835317312619295`*^9}, {3.7835318063456116`*^9, 
   3.7835319966329117`*^9}, {3.783532028946336*^9, 3.783532094889991*^9}, 
   3.78353505798984*^9, 3.783535481064458*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell["File Export", "Section",
 CellChangeTimes->{{3.7809626146101227`*^9, 3.7809626162315845`*^9}}],

Cell["Writes updated versions of data files.", "Text",
 CellChangeTimes->{{3.7809626206251726`*^9, 3.7809626535056324`*^9}, {
  3.783275221809955*^9, 3.7832752222068377`*^9}, {3.7835322471225834`*^9, 
  3.783532254693207*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{"Set", " ", "directory"}], " ", "*)"}], "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"SetDirectory", "[", 
     RowBox[{"NotebookDirectory", "[", "]"}], "]"}], ";"}], 
   "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{"Write", " ", "node", " ", "data"}], " ", "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"nodedata", "=", 
     RowBox[{"{", "ncomment", "}"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Do", "[", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"nodedata", "=", 
       RowBox[{"Append", "[", 
        RowBox[{"nodedata", ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"nid", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"nname", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"ntype", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"nline", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"nvalue", "[", 
            RowBox[{"[", "i", "]"}], "]"}]}], "}"}]}], "]"}]}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{"i", ",", "1", ",", 
        RowBox[{"Length", "[", "nid", "]"}]}], "}"}]}], "]"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Export", "[", 
     RowBox[{
     "\"\<output//node_data.txt\>\"", ",", "nodedata", ",", "\"\<Table\>\"", 
      ",", 
      RowBox[{"\"\<FieldSeparators\>\"", "\[Rule]", "\"\<\\t\>\""}]}], "]"}], 
    ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Clear", "[", "nodedata", "]"}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{"Write", " ", "arc", " ", "data"}], " ", "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"arcdata", "=", 
     RowBox[{"{", "acomment", "}"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Do", "[", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"arcdata", "=", 
       RowBox[{"Append", "[", 
        RowBox[{"arcdata", ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"aid", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"atype", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"aline", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"arc", "[", 
            RowBox[{"[", 
             RowBox[{"i", ",", "1"}], "]"}], "]"}], ",", 
           RowBox[{"arc", "[", 
            RowBox[{"[", 
             RowBox[{"i", ",", "2"}], "]"}], "]"}], ",", 
           RowBox[{"atime", "[", 
            RowBox[{"[", "i", "]"}], "]"}]}], "}"}]}], "]"}]}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{"i", ",", "1", ",", 
        RowBox[{"Length", "[", "aid", "]"}]}], "}"}]}], "]"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Export", "[", 
     RowBox[{
     "\"\<output//arc_data.txt\>\"", ",", "arcdata", ",", "\"\<Table\>\"", 
      ",", 
      RowBox[{"\"\<FieldSeparators\>\"", "\[Rule]", "\"\<\\t\>\""}]}], "]"}], 
    ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Clear", "[", "arcdata", "]"}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{"Write", " ", "transit", " ", "data"}], " ", "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"linedata", "=", 
     RowBox[{"{", "lcomment", "}"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Do", "[", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"linedata", "=", 
       RowBox[{"Append", "[", 
        RowBox[{"linedata", ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"lid", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"lname", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"ltype", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"lfleet", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"lcircuit", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"lscaling", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"llb", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"lub", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"lfare", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"lfreq", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"lcap", "[", 
            RowBox[{"[", "i", "]"}], "]"}]}], "}"}]}], "]"}]}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{"i", ",", "1", ",", 
        RowBox[{"Length", "[", "lid", "]"}]}], "}"}]}], "]"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Export", "[", 
     RowBox[{
     "\"\<output//transit_data.txt\>\"", ",", "linedata", ",", 
      "\"\<Table\>\"", ",", 
      RowBox[{"\"\<FieldSeparators\>\"", "\[Rule]", "\"\<\\t\>\""}]}], "]"}], 
    ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Clear", "[", "linedata", "]"}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{"Write", " ", "initial", " ", "flows"}], " ", "*)"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"flowdata", "=", 
     RowBox[{"{", "fcomment", "}"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Do", "[", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"flowdata", "=", 
       RowBox[{"Append", "[", 
        RowBox[{"flowdata", ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"fid", "[", 
            RowBox[{"[", "i", "]"}], "]"}], ",", 
           RowBox[{"fflow", "[", 
            RowBox[{"[", "i", "]"}], "]"}]}], "}"}]}], "]"}]}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{"i", ",", "1", ",", 
        RowBox[{"Length", "[", "fid", "]"}]}], "}"}]}], "]"}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Export", "[", 
     RowBox[{
     "\"\<output//initial_flows.txt\>\"", ",", "flowdata", ",", 
      "\"\<Table\>\"", ",", 
      RowBox[{"\"\<FieldSeparators\>\"", "\[Rule]", "\"\<\\t\>\""}]}], "]"}], 
    ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Clear", "[", "flowdata", "]"}], ";"}], "\[IndentingNewLine]", 
   "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{"Write", " ", "initial", " ", "solution", " ", "log"}], " ", 
    "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"Export", "[", 
     RowBox[{
     "\"\<output//initial_solution_log.txt\>\"", ",", "logdata", ",", 
      "\"\<Table\>\"", ",", 
      RowBox[{"\"\<FieldSeparators\>\"", "\[Rule]", "\"\<\\t\>\""}]}], "]"}], 
    ";"}], "\[IndentingNewLine]"}]}]], "Input",
 CellChangeTimes->CompressedData["
1:eJxTTMoPSmViYGAQBWIQnfPA7E6TwRvHVwny90G07o6eJyB6jV4rfzOQviKv
KgGiK3J+K4DoENl5eiB6WsMucxAdFtJiA6KPOT71AdFJB74EgegtyjLRIDpw
+6oEEB1k+iMVRN+b4lwMotdyctaB6KrFD5tA9K7EjFkg2oH/9GIQfcFhym6w
eR7z9oPoc1V3joPoA/KCD0D0IfvzX0F05P27Zi1A+szebU4g+tf+q+4guuOk
XSiI9rKViQbRQU7JcSCapcKrEkRbXA+sAtEerRfrQfQEDZFmEL23TNOmFUiv
q39jC6JL8qVCQHQRL1MciPaSOpACopf5XEkF0bUb52WC6IIjx/NANAD5iqE1

  "]]
}, Open  ]]
}, Open  ]]
},
WindowSize->{757, 833},
WindowMargins->{{90, Automatic}, {Automatic, 60}},
FrontEndVersion->"10.4 for Microsoft Windows (64-bit) (April 11, 2016)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 93, 1, 64, "Chapter"],
Cell[676, 25, 266, 5, 49, "Text"],
Cell[CellGroupData[{
Cell[967, 34, 150, 2, 63, "Section"],
Cell[1120, 38, 245, 3, 30, "ItemNumbered"]
}, Open  ]],
Cell[CellGroupData[{
Cell[1402, 46, 99, 1, 63, "Section"],
Cell[1504, 49, 273, 5, 49, "Text"],
Cell[1780, 56, 4044, 62, 72, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[5861, 123, 96, 1, 63, "Section"],
Cell[5960, 126, 187, 4, 30, "Text"],
Cell[6150, 132, 1074, 17, 31, "Input"],
Cell[7227, 151, 273, 9, 5, "Text"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[7549, 166, 94, 1, 64, "Chapter"],
Cell[7646, 169, 328, 6, 49, "Text"],
Cell[CellGroupData[{
Cell[7999, 179, 250, 3, 63, "Section"],
Cell[8252, 184, 167, 3, 30, "Text"],
Cell[8422, 189, 11727, 346, 1212, "Input"]
}, Open  ]],
Cell[CellGroupData[{
Cell[20186, 540, 100, 1, 63, "Section"],
Cell[20289, 543, 226, 3, 30, "Text"],
Cell[20518, 548, 7250, 193, 912, "Input"]
}, Open  ]]
}, Open  ]]
}
]
*)

